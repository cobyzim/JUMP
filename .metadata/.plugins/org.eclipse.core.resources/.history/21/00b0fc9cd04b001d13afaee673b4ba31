package com.cognixia.jump.miniproject;

import java.util.Scanner;

public class SeatReservationMain {

	public static void main(String[] args) {
		Seat[][] seats = genSeats(5,5);
		Scanner scanner = new Scanner(System.in);
		
		//Display empty seats grid
		printSeatingGrid(seats);
		
		reserveSeat(seats, scanner);
		
		//Do Loop if user wants to continue
		String resp = "";
		do {
			System.out.println("Are you finished reserving seats? (Y/N)");
			resp = scanner.nextLine().toUpperCase();
			
			if (resp.equals("N")) {
				reserveSeat(seats, scanner);
			}
			else {
				System.out.println("\nThanks for reserving your seats!\n");
				printSeatingGrid(seats);
			}
			
		}
		while(resp.equals("N"));
		
		
	}
	
	public static Seat[][] genSeats(int numRows, int numCols) {
		Seat[][] seatGrid = new Seat[numRows][numCols];
		//Have to initialize seats so that the objects aren't null
		for (int i = 0; i < numRows; i++) {
			for (int j = 0; j < numCols; j++) {
				seatGrid[i][j] = new Seat();
			}
		}
		
		return seatGrid;
	}
	
	//Check for empty seat helper method
	public static boolean seatIsEmpty(Seat seat) {
		boolean isEmpty = false;
		if (seat.getName() == null) {
			isEmpty = true;
		}
		
		return isEmpty;
	}
	
	
	//Method to print the current seating grid
	public static void printSeatingGrid(Seat[][] seats) {
		System.out.println("===============" + "\nSEATS" + "\n===============\n");
		System.out.println("    1 2 3 4 5" + "\n   ----------");
		int counter = 1;
		for (int row = 0; row < seats.length; row++) {
			System.out.print(counter + " | ");
			for (int cols = 0; cols < seats[row].length; cols++) {
				if (seatIsEmpty(seats[row][cols])) {
					System.out.print("o ");
				}
				else {
					System.out.print("x ");
				}
			}
			counter++;
			System.out.println();
		}
	}
	
	public static void reserveSeat(Seat[][] seats, Scanner scanner) {
		System.out.println();
		System.out.println("Which seat do you want to reserve?");
		System.out.println("Row: ");
		
//		int row = Integer.parseInt(scanner.nextLine());
		//TODO: Add check to make sure provided row is valid
		int row = returnRow(scanner);
		System.out.println("Column: ");
		int col = Integer.parseInt(scanner.nextLine());
		//TODO: Add check to make sure provided col is valid
		System.out.println("Name of person sitting here: ");
		String name = scanner.nextLine();
		//TODO: Add check to make sure name is actually a string (not a char or number)
		System.out.println();

		if (seats[row - 1][col - 1].getName() == null) {
			seats[row - 1][col - 1].setRow(row);
			seats[row - 1][col - 1].setCol(col);
			seats[row - 1][col - 1].setName(name);
		}
		else {
			System.out.println(seats[row - 1][col - 1].getName() + " has already reserved this seat, please pick a different one");
			reserveSeat(seats, scanner);
		}
		
		
		printSeatingGrid(seats);
		System.out.println();
	}
	
	
	public static int returnRow(Scanner scanner) {
		try {
			int row = Integer.parseInt(scanner.nextLine());
			if (row != 1 && row != 2 && row != 3 && row != 4 && row !=5) {
				System.out.println("INVALID ROW: Please enter a valid row (1-5)");
				returnRow(scanner);
			}
			return row;
		}
		catch (NumberFormatException e){
			System.out.println("INVALID ROW: Row must be a number between 1 and 5");
			returnRow(scanner);
		}
		return -1;
	}
	
	
}
